import{j as s}from"./jsx-runtime-D_zvdyIk.js";import{r as d}from"./index-D4lIrffr.js";import{S as P}from"./SortButton-DZ_VRFkt.js";import{C as U}from"./CsvButton-BxnVT3qS.js";import{S as _}from"./Select-DOUcZvk3.js";import{B as g}from"./Button-BkaHsfYs.js";import{I as h}from"./Icon-Bj0efVpV.js";import{C as I}from"./CsvInput-DO_SapQN.js";const L=({fileName:y,defaultPageSize:x=50,skeleton:j,handleOnUpload:w,sortBy:b,excludeDownload:C,includeUpload:N,isUploading:T,uploadWarningMessage:q,uploadSuccessMessage:S,excludePagination:z,footer:k,children:M})=>{const{header:r,rows:i}=M,[t,B]=d.useState(b??{index:0}),[a,c]=d.useState({num:0,size:x}),R=e=>{B(n=>n.index===e?{...n,desc:!n.desc}:{index:e})},m=d.useMemo(()=>{var l;const e=[...i],n=(l=r[t.index])==null?void 0:l.sort;return n?e.sort(n):e.sort((o,$)=>{var u,p,v,f;const D=((p=(u=o[t.index])==null?void 0:u.value)==null?void 0:p.toString().toLowerCase())??"",F=((f=(v=$[t.index])==null?void 0:v.value)==null?void 0:f.toString().toLowerCase())??"";return D.localeCompare(F)}),t.desc?e.reverse():e},[i,t,r]),A=d.useMemo(()=>m.slice(a.num*a.size,(a.num+1)*a.size),[m,a]),E=r.filter(e=>!e.csvExclude).map(e=>typeof e.name=="string"?e.name:""),H=i.map(e=>e.filter((n,l)=>!r[l].csvExclude).map(n=>n.csv??n.value??""));return s.jsxs("section",{className:"muncher-table",children:[s.jsx("div",{className:"row head",children:r.map((e,n)=>e.visibility==="hidden"?null:s.jsx("div",{title:e.title,className:e.visibility?"col main":"col",children:typeof e.name=="string"?s.jsx("div",{className:"sort-button",children:s.jsx(P,{onClick:()=>R(n),active:t.index===n,sortAsc:!t.desc,children:e.name})}):e.name},`row-head-${n}`))}),j||A.map((e,n)=>s.jsx("div",{className:"row",children:e.map((l,o)=>r[o].visibility==="hidden"?null:s.jsx("div",{className:r[o].visibility?"col main":"col",children:l.content},`row-col-${n}-${o}`))},`row-${n}`)),k??null,s.jsxs("div",{className:"row-footer",children:[s.jsxs("div",{className:"row-footer-buttons",children:[!C&&s.jsx(U,{filename:y??"download",variant:"secondary",title:"Download",header:E,data:H}),N&&s.jsx(I,{name:"csv-input-file",handleOnChange:w,isUploading:T,warningMessage:q,successMessage:S})]}),!z&&s.jsxs("div",{className:"pagination",children:[s.jsxs("div",{className:"left",children:["Rows:",s.jsx(_,{name:"pageSize",options:[{label:"50",value:"50"},{label:"100",value:"100"},{label:"500",value:"500"}],value:String(a.size),onChange:e=>c({num:0,size:parseInt(e.target.value,10)})})]}),s.jsxs("div",{className:"center",children:[a.num*a.size+1," -",Math.min((a.num+1)*a.size,i.length)," of ",i.length]}),s.jsxs("div",{className:"right",children:[s.jsx(g,{variant:"transparent",disabled:a.num===0,size:"small",onClick:()=>c({...a,num:a.num-1}),children:s.jsx(h,{name:"chevron-left"})}),s.jsx(g,{variant:"transparent",disabled:(a.num+1)*a.size>=i.length,size:"small",onClick:()=>c({...a,num:a.num+1}),children:s.jsx(h,{name:"chevron-right"})})]})]})]})]})};L.__docgenInfo={description:"",methods:[],displayName:"Table",props:{children:{required:!0,tsType:{name:"signature",type:"object",raw:`{
    header: Head[];
    rows: Col[][];
}`,signature:{properties:[{key:"header",value:{name:"Array",elements:[{name:"Head"}],raw:"Head[]",required:!0}},{key:"rows",value:{name:"Array",elements:[{name:"Array",elements:[{name:"Col"}],raw:"Col[]"}],raw:"Col[][]",required:!0}}]}},description:""},skeleton:{required:!1,tsType:{name:"ReactNode"},description:""},sortBy:{required:!1,tsType:{name:"Sort"},description:""},fileName:{required:!1,tsType:{name:"string"},description:""},defaultPageSize:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"50",computed:!1}},excludeDownload:{required:!1,tsType:{name:"literal",value:"true"},description:""},excludePagination:{required:!1,tsType:{name:"boolean"},description:""},includeUpload:{required:!1,tsType:{name:"literal",value:"true"},description:""},isUploading:{required:!1,tsType:{name:"boolean"},description:""},handleOnUpload:{required:!1,tsType:{name:"signature",type:"function",raw:"(file: File) => void",signature:{arguments:[{type:{name:"File"},name:"file"}],return:{name:"void"}}},description:""},uploadWarningMessage:{required:!1,tsType:{name:"string"},description:""},uploadSuccessMessage:{required:!1,tsType:{name:"string"},description:""},footer:{required:!1,tsType:{name:"ReactNode"},description:""}}};export{L as T};
